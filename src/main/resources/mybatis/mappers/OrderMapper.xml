<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jhta.pony.dao.OrderDAO">
<!-- getAllByAdmin -->
<select id="getAllByAdmin" resultType="kr.co.jhta.pony.dto.OrderDTO" parameterType="kr.co.jhta.pony.dto.StartEnd">
	SELECT rn, orderNo, orderDate, memberNo, orderRecipientName, orderRecipientPhone, orderStatus, orderDeliveryCharge, orderPoint, orderTotal
	FROM (SELECT ROW_NUMBER() OVER (ORDER BY orderNo DESC) AS rn, orderNo, orderDate, memberNo, orderRecipientName, orderRecipientPhone, orderStatus, orderDeliveryCharge, orderPoint, orderTotal
	      FROM `ORDER`) AS derived
	WHERE rn BETWEEN #{startNo} AND #{endNo}
</select>

<!-- selectOne -->
<select id="selectOne" parameterType="int" resultType="kr.co.jhta.pony.dto.OrderDTO">
	SELECT * 
	FROM `ORDER`
	WHERE orderNo = #{orderNo}
</select>

<!-- getTotal -->
<!-- ORDER는 예약어이므로 ''로 감싸 테이블임을 표시해야 함 -->
<select id="getTotal" resultType="int">
	SELECT count(*) cnt
	FROM `ORDER`
</select>

<!-- deleteOne -->
<delete id="deleteOne" parameterType="int">
	DELETE 
	FROM `ORDER`
	WHERE orderNo = #{orderNo}
</delete>		
	
</mapper>